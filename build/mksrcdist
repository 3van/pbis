#!/bin/bash

old_BUILD_OS_TYPE=${BUILD_OS_TYPE}
BUILD_OS_TYPE=source
export BUILD_OS_TYPE

source ${BUILD_ROOT}/src/linux/build/common.sh

PRODUCT=$1

if [ ! -f ${BUILD_ROOT}/src/linux/build/products/${PRODUCT}/config ]; then
   echo "${PRODUCT} is not a valid product name.  Exiting...."
   exit 1
fi

. ${BUILD_ROOT}/src/linux/build/products/${PRODUCT}/config

if [ -z "${PACKAGES}" ]; then 
   echo "Unable to determine the list of packages to archive.... Exiting."
   exit 2
fi

BUILD_OS_TYPE=${old_BUILD_OS_TYPE}
export BUILD_OS_TYPE

for p in ${PACKAGES}; do
    ${BUILD_ROOT}/src/linux/build/mkpkg --type source $p
done

