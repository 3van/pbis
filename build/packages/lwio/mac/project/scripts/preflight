#!/bin/bash

RPC_NAME=com.likewisesoftware.dcerpcd
RPC_DAEMON_OLD=/System/Library/LaunchDaemons/$RPC_NAME.plist
RPC_DAEMON=/Library/LaunchDaemons/$RPC_NAME.plist
LWIO_NAME=com.likewisesoftware.lwiod
LWIO_DAEMON=/Library/LaunchDaemons/$LWIO_NAME.plist
NPCMUXD=npcmuxd
NPCMUXD_PATH=/opt/likewise/sbin/$NPCMUXD
NPCMUXER_NAME=com.likewisesoftware.$NPCMUXD
NPCMUXER_DAEMON_OLD=/System/Library/LaunchDaemons/$NPCMUXER_NAME.plist
NPCMUXER_DAEMON=/Library/LaunchDaemons/$NPCMUXER_NAME.plist
LSMBD=lsmbd
LSMBD_PATH=/opt/likewise/sbin/$LSMBD
LSMB_NAME=com.likewisesoftware.$LSMBD
LSMB_DAEMON=/Library/LaunchDaemons/$LSMB_NAME.plist
LWRDRD=lwrdrd
LWRDRD_PATH=/opt/likewise/sbin/$LWRDRD
LWRDRD_NAME=com.likewisesoftware.$LWRDRD
LWRDRD_DAEMON=/Library/LaunchDaemons/$LWRDRD_NAME.plist

if [ -f $RPC_DAEMON_OLD ]; then
   launchctl list | grep $RPC_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $RPC_NAME > /dev/null
   fi
   launchctl unload $RPC_DAEMON_OLD > /dev/null
   rm $RPC_DAEMON > /dev/null
fi

if [ -f $RPC_DAEMON ]; then
   launchctl list | grep $RPC_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $RPC_NAME > /dev/null
   fi
   launchctl unload $RPC_DAEMON > /dev/null
   rm $RPC_DAEMON > /dev/null
fi

if [ -f $LWIO_DAEMON ]; then
   launchctl list | grep $LWIO_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $LWIO_NAME > /dev/null
   fi
   launchctl unload $LWIO_DAEMON > /dev/null
   rm $LWIO_DAEMON > /dev/null
fi

if [ -f $NPCMUXER_DAEMON_OLD ]; then
   launchctl list | grep $NPCMUXER_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $NPCMUXER_NAME > /dev/null
   fi
   launchctl unload $NPCMUXER_DAEMON_OLD > /dev/null
   rm $NPCMUXER_DAEMON > /dev/null
   if [ -f $NPCMUXER_PATH ]; then
       rm $NPCMUXER_PATH > /dev/null
   fi
fi

if [ -f $NPCMUXER_DAEMON ]; then
   launchctl list | grep $NPCMUXER_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $NPCMUXER_NAME > /dev/null
   fi
   launchctl unload $NPCMUXER_DAEMON > /dev/null
   rm $NPCMUXER_DAEMON > /dev/null
   if [ -f $NPCMUXER_PATH ]; then
       rm $NPCMUXER_PATH > /dev/null
   fi
fi

if [ -f $LWRDRD_DAEMON ]; then
   launchctl list | grep $LWRDRD_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $LWRDRD_NAME > /dev/null
   fi
   launchctl unload $LWRDRD_DAEMON > /dev/null
   rm $LWRDRD_DAEMON > /dev/null
   if [ -f $LWRDRD_PATH ]; then
       rm $LWRDRD_PATH > /dev/null
   fi
fi

if [ -f $LSMB_DAEMON ]; then
   launchctl list | grep $LSMB_NAME > /dev/null
   if [ $? -eq 0 ]; then
      launchctl stop $LSMB_NAME > /dev/null
   fi
   launchctl unload $LSMB_DAEMON > /dev/null
   rm $LSMB_DAEMON > /dev/null
   if [ -f $LSMB_PATH ]; then
       rm $LSMB_PATH > /dev/null
   fi
fi

