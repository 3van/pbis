#!/bin/bash

for _file in `svn status "$@" | grep '^\?' | awk '{print $2;}'`
do
    case "`basename "$_file"`" in
	*.c|*.h|configure.in|configure.ac|Makefile.am)
	    echo "Skipping $_file"
	    ;;
	*)
	    echo "Ignoring $_file"
	    _dir="`dirname "$_file"`"
	    svn propget svn:ignore "$_dir" > "${_dir}/.svn_ignore"
	    basename "$_file" >> "${_dir}/.svn_ignore"
	    svn propset svn:ignore -F "${_dir}/.svn_ignore" "$_dir" >/dev/null 2>&1
	    rm -f "${_dir}/.svn_ignore"
	    ;;
    esac
done
